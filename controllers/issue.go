package controllers

import (
	"cvevulner/errcode"
	"encoding/json"
	"github.com/astaxie/beego"
	"github.com/astaxie/beego/logs"
)

type IssueOathCallbackController struct {
	beego.Controller
}

func (c *IssueOathCallbackController) RetData(resp map[string]interface{}) {
	c.Data["json"] = resp
	c.ServeJSON()
}

// @Title UserLogin
// @Description UserLogin
// @Param	body		body 	models.User	true		"body for user content"
// @Success 200 {int} models.User.ID
// @Failure 403 body is empty
// @router / [post]
func (c *IssueOathCallbackController) Post() {
	req := make(map[string]interface{})
	resp := make(map[string]interface{})
	resp["errno"] = errcode.RecodeLoginErr
	resp["errmsg"] = errcode.RecodeText(errcode.RecodeLoginErr)
	resp["body"] = Result{}
	defer c.RetData(resp)
	json.Unmarshal(c.Ctx.Input.RequestBody, &req)
	logs.Info("登录请求参数：", &req)
	return
}
