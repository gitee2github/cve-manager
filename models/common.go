package models

import (
	"github.com/astaxie/beego/logs"
	"time"
)

func Time2Str() string {
	const shortForm = "2006-01-02 15:04:05"
	t := time.Now()
	str := t.Format(shortForm)
	return str
}

func CheckToken(token string) bool {
	var ou OtherUser
	err := GetUserByToken(token, &ou)
	if err != nil {
		logs.Error("token: ", token, ", 错误")
		return false
	}
	now := Time2Str()
	logs.Info("token: now: ", now, ",expir: ", ou.ExpirationTime)
	if now > ou.ExpirationTime {
		return false
	}
	return true
}
