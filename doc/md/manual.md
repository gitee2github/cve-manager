## issue分析说明

### issue分析触发流程图
<img src="../image/触发issue流程图.png" />

#### issue 分析评论流程
 
issue分析注意事项
- 只有issue的Maintainer的评论分析才是有效分析
- 分析issue模板并拷贝以下内容在**评论区回复**： 
  ```batch
    影响性分析说明:  
    openEuler评分:  
    受影响版本排查(受影响/不受影响): 
    1.openEuler-20.03-LTS:
    2.openEuler-20.09:
  ```
- 受影响版本排查(受影响/不受影响)填写说明：
   ```batch
    1>issue模板或第一条评论中不包含 如：1.openEuler-20.03-LTS:之类的填写项则不需要填写，
      如Maintainer发现有对应的版本需要填写则参考下方说明格式填写
    2>填写方式： 
       1.openEuler-20.03-LTS:受影响
       2.openEuler-20.09:不受影响
  ```
 - 分析内容可一次性填写完整也可分条填写
 - 重复分析内容可覆盖上一次分析的内容（只要包含键值的评论不管内容是否为空都会覆盖）
 - CVE-Manage 在每次分析评论提交后根据内容进行解析并根据解析后的内容进行回复，Maintainer在评论后没得到回复可主动刷新页面或有延迟
 - 当内容填写完整会触发两种回复中的一种：
 
    1.评分不一致需要审核
    
    | 状态  | 需分析            | 内容                     |
    |-----|----------------|------------------------|
    | 已分析 | openEulerScore | 6.0                    |
    | 已分析 | 影响性分析说明        | 您分析的内容                 |
    | 已分析 | OpenEulerVector | AV:A/AC:C...           |
    | 已分析 | 受影响的版本         | openEuler-20.03-LTS:受影响 |
     **因OpenEulerScore与NvdScore不一致，分析内容需审核，请等待审核** 
     
     2.评分一致
     
     | 状态  | 需分析            | 内容                     |
     |-----|----------------|------------------------|
     | 已分析 | openEulerScore | 6.0                    |
     | 已分析 | 影响性分析说明        | 您分析的内容                 |
     | 已分析 | OpenEulerVector | AV:A/AC:C...           |
     | 已分析 | 受影响的版本         | openEuler-20.03-LTS:受影响 |
     **请确认分析内容的准确性，确认无误后，您可以进行后续步骤或您可以继续分析。** 
  - 评分不一致则需等待审核员审核后进行下一步 **否则将视为无效分析将不可导出**
  - issue 已完成（关闭）且已分析完结、评分不一致需审核通过后的issue才具备发布安全公告到官网
  
 ### 审核员操作说明
   - 审核员对Maintainer填写的评分在当前issue的评论区回复如下指令
   - 使用指令说明
   
        | 指令 | 指令说明 | 使用权限 |
        | ------ | ------- | ------- |
        | /approve | 审核通过 | security-committee-sig组成员 |
        | /reject | 审核拒绝 | security-committee-sig组成员 |
   
   - 注意事项
   ```batch
    1.指令独占一行
    2.以最后一位审核员评论审核的指令为最终指令
    3.审核评论成功 CVE-Manage 会新增一条@责任人的评论
      （若没有新增评论，可主动刷新页面，多次刷新后没有回复则没有审核评论成功）
```
  
### 分析导出
- 每天凌晨2：00 CVEManage 会通过定时任务生成excel文件
- 通过 http://159.138.2.2:80/v1/download/excel 下载最新的excel文件
- 未发布到官网的issue 都会在最新的excel文档中 如果之前下载的未能及时同步到官网可下载最新文档再同步即可。
    
